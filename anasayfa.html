<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>İbrahim Beta Özel</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@300;500;600;700&family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-dark: #050505;
            --panel-bg: rgba(20, 20, 20, 0.95);
            --primary: #00f3ff; /* Neon Cyan */
            --secondary: #bc13fe; /* Neon Purple */
            --success: #00ff9d;
            --text-main: #ffffff;
            --text-muted: #888888;
            --radius: 50px;
            --card-radius: 24px;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Rajdhani', sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-main);
            height: 100vh;
            display: flex;
            overflow: hidden;
            background-image: radial-gradient(circle at 50% 0%, rgba(188, 19, 254, 0.15) 0%, transparent 60%);
        }

        /* --- Sidebar --- */
        .sidebar {
            position: fixed; left: -300px; top: 0; width: 300px; height: 100%;
            background: #0f0f0f; border-right: 1px solid #333;
            transition: left 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 1000; padding: 25px; display: flex; flex-direction: column;
        }
        .sidebar.active { left: 0; }
        .menu-title {
            font-size: 1.8rem; font-weight: 700; color: var(--primary);
            margin-bottom: 40px; text-transform: uppercase; letter-spacing: 2px;
        }
        .menu-item {
            padding: 18px 25px; margin-bottom: 15px; border-radius: 20px;
            cursor: pointer; transition: 0.3s; color: #ccc;
            display: flex; align-items: center; gap: 15px; font-weight: 600;
            border: 1px solid transparent;
        }
        .menu-item:hover, .menu-item.active {
            background: rgba(0, 243, 255, 0.1); color: var(--primary);
            border: 1px solid rgba(0, 243, 255, 0.3);
            transform: translateX(5px);
        }

        /* --- Overlay --- */
        .overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8); z-index: 900; opacity: 0; visibility: hidden;
            transition: 0.3s; backdrop-filter: blur(4px);
        }
        .overlay.active { opacity: 1; visibility: visible; }

        /* --- Main Container --- */
        .main-container {
            flex: 1; display: flex; flex-direction: column; align-items: center;
            padding: 20px; overflow-y: auto; position: relative; z-index: 1;
            width: 100%;
        }

        .hamburger {
            position: absolute; top: 25px; left: 25px; width: 55px; height: 55px;
            border-radius: 50%; background: #111; border: 1px solid var(--primary);
            color: var(--primary); font-size: 1.3rem; cursor: pointer;
            display: flex; align-items: center; justify-content: center;
            transition: 0.3s; z-index: 1001; box-shadow: 0 0 15px rgba(0, 243, 255, 0.2);
        }
        .hamburger:hover { background: var(--primary); color: #000; box-shadow: 0 0 25px var(--primary); }

        /* --- Search Area --- */
        .search-wrapper { width: 100%; max-width: 600px; margin-top: 80px; text-align: center; animation: fadeIn 0.8s ease; }
        
        .app-title {
            font-size: 3rem; text-transform: uppercase; margin-bottom: 20px;
            letter-spacing: 3px; background: linear-gradient(to right, var(--primary), var(--secondary));
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }

        .form-box {
            background: rgba(255,255,255,0.03); padding: 35px;
            border-radius: var(--card-radius); border: 1px solid #333;
            backdrop-filter: blur(10px); box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }

        .input-group { position: relative; margin-bottom: 30px; text-align: left; }
        
        .custom-input {
            width: 100%; background: transparent; border: none; border-bottom: 2px solid #333;
            padding: 15px 10px; font-size: 1.2rem; color: white; font-family: 'Roboto Mono', monospace;
            transition: 0.3s;
        }
        .custom-input:focus { outline: none; border-color: var(--primary); }

        .oval-btn {
            width: 100%; padding: 20px; background: linear-gradient(90deg, var(--secondary), var(--primary));
            border: none; border-radius: var(--radius); color: #fff; font-size: 1.3rem; font-weight: 700;
            text-transform: uppercase; cursor: pointer; transition: 0.3s;
            position: relative; overflow: hidden; display: flex; justify-content: center; align-items: center;
        }
        .oval-btn:hover { transform: scale(1.02); box-shadow: 0 0 30px rgba(188, 19, 254, 0.4); }
        .oval-btn:disabled { opacity: 0.6; cursor: wait; }

        /* --- Result Area --- */
        .result-area {
            width: 100%; max-width: 800px; margin-top: 40px; padding-bottom: 50px;
            display: none; animation: slideUp 0.5s ease;
        }

        /* Card Styles */
        .detail-card {
            background: #141414; border: 1px solid #333; border-radius: 20px;
            padding: 25px; margin-bottom: 20px; position: relative;
        }
        
        .detail-card h3 {
            color: var(--primary); margin-bottom: 20px; font-size: 1.5rem;
            border-bottom: 1px solid #333; padding-bottom: 15px; display: flex; justify-content: space-between;
        }

        .data-row {
            display: flex; justify-content: space-between; margin-bottom: 12px;
            font-size: 1rem; border-bottom: 1px solid rgba(255,255,255,0.03); padding-bottom: 8px;
        }
        .data-label { color: var(--text-muted); font-size: 0.9rem; }
        .data-value { color: #fff; font-weight: 600; font-family: 'Roboto Mono', monospace; text-align: right; }

        /* GSM Grid (Chip Style) */
        .gsm-grid {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 15px;
        }
        .gsm-chip {
            background: #1a1a1a; border: 1px solid var(--primary); color: var(--primary);
            padding: 15px; border-radius: 12px; text-align: center; font-family: 'Roboto Mono', monospace;
            font-size: 1.1rem; cursor: pointer; transition: 0.2s; position: relative; overflow: hidden;
        }
        .gsm-chip:hover { background: var(--primary); color: #000; transform: translateY(-3px); }
        .gsm-chip small { display: block; font-size: 0.7em; color: inherit; opacity: 0.7; margin-top: 5px; }

        /* Sülale List (Row Style) */
        .sulale-list { max-height: 500px; overflow-y: auto; padding-right: 10px; }
        .sulale-item {
            background: #111; border-left: 3px solid #444; padding: 15px; margin-bottom: 10px;
            border-radius: 0 10px 10px 0; display: flex; justify-content: space-between; align-items: center;
            transition: 0.2s; cursor: pointer;
        }
        .sulale-item:hover { background: #1a1a1a; border-left-color: var(--secondary); }
        
        .rel-badge {
            background: #222; padding: 4px 12px; border-radius: 20px; font-size: 0.8rem;
            color: var(--secondary); font-weight: 700; text-transform: uppercase; border: 1px solid #333;
        }
        
        /* Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #0a0a0a; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 3px; }

        /* Toast */
        .toast {
            position: fixed; bottom: 30px; right: 30px; background: #1a1a1a; color: #fff;
            padding: 15px 25px; border-radius: 10px; border-left: 5px solid var(--primary);
            box-shadow: 0 10px 30px rgba(0,0,0,0.5); transform: translateX(120%); transition: 0.4s; z-index: 2000;
        }
        .toast.show { transform: translateX(0); }

        /* Animations */
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* Mobile */
        @media (max-width: 768px) {
            .app-title { font-size: 2rem; }
            .sidebar { width: 85%; }
            .hamburger { top: 20px; left: 20px; width: 45px; height: 45px; }
        }
    </style>
</head>
<body>

    <div class="overlay" id="overlay" onclick="toggleMenu()"></div>

    <nav class="sidebar" id="sidebar">
        <div class="menu-title">MODÜLLER</div>
        <div class="menu-item active" onclick="switchMode('tc', 'TC Sorgu', 'T.C Kimlik No')">
            <i class="fa-solid fa-fingerprint"></i> TC Sorgu
        </div>
        <div class="menu-item" onclick="switchMode('adsoyad', 'Ad Soyad Sorgu', 'Ad Soyad')">
            <i class="fa-solid fa-user-tag"></i> Ad Soyad Sorgu
        </div>
        <div class="menu-item" onclick="switchMode('adres', 'Adres Sorgu', 'T.C Kimlik No')">
            <i class="fa-solid fa-map-pin"></i> Adres Sorgu
        </div>
        <div class="menu-item" onclick="switchMode('gsmtc', 'GSM -> TC Sorgu', 'GSM Numarası')">
            <i class="fa-solid fa-mobile-screen"></i> GSM'den TC
        </div>
        <div class="menu-item" onclick="switchMode('tcgsm', 'TC -> GSM Sorgu', 'T.C Kimlik No')">
            <i class="fa-solid fa-tower-cell"></i> TC'den GSM
        </div>
        <div class="menu-item" onclick="switchMode('isyeri', 'İşyeri Sorgu', 'T.C Kimlik No')">
            <i class="fa-solid fa-briefcase"></i> İşyeri Sorgu
        </div>
        <div class="menu-item" onclick="switchMode('sulale', 'Sülale Sorgu', 'T.C Kimlik No')">
            <i class="fa-solid fa-people-group"></i> Sülale Sorgu
        </div>
    </nav>

    <button class="hamburger" onclick="toggleMenu()"><i class="fa-solid fa-bars"></i></button>

    <div class="main-container">
        <div class="search-wrapper">
            <h1 class="app-title" id="pageTitle">TC Sorgu</h1>
            <div class="form-box">
                <form id="mainForm">
                    <div class="input-group">
                        <input type="text" id="queryInput" class="custom-input" placeholder=" " required autocomplete="off">
                        <label style="position:absolute; top:10px; left:10px; color:#555; pointer-events:none; transition:0.3s;" id="inputLabel">T.C Kimlik No</label>
                    </div>
                    <button type="submit" class="oval-btn" id="btnSearch">
                        <i class="fa-solid fa-magnifying-glass"></i> Sorgula
                    </button>
                </form>
            </div>
        </div>

        <div class="result-area" id="resultArea"></div>
    </div>

    <div class="toast" id="toast">Bildirim</div>

    <script>
        // State
        let currentMode = 'tc';
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('overlay');
        const mainForm = document.getElementById('mainForm');
        const queryInput = document.getElementById('queryInput');
        const pageTitle = document.getElementById('pageTitle');
        const resultArea = document.getElementById('resultArea');
        const btnSearch = document.getElementById('btnSearch');
        const menuItems = document.querySelectorAll('.menu-item');

        // UI Logic
        function toggleMenu() {
            sidebar.classList.toggle('active');
            overlay.classList.toggle('active');
        }

        function switchMode(mode, title, label) {
            currentMode = mode;
            pageTitle.textContent = title;
            document.getElementById('inputLabel').textContent = label;
            
            // Input Type Logic
            queryInput.type = (mode === 'gsmtc') ? 'tel' : 'text';
            queryInput.value = '';
            resultArea.innerHTML = '';
            resultArea.style.display = 'none';

            // Active Menu Item
            menuItems.forEach(item => item.classList.remove('active'));
            event.currentTarget.classList.add('active');
            toggleMenu();
        }

        function showToast(msg) {
            const t = document.getElementById('toast');
            t.textContent = msg;
            t.classList.add('show');
            setTimeout(() => t.classList.remove('show'), 3000);
        }

        // Input Label Animation
        queryInput.addEventListener('focus', () => {
            document.getElementById('inputLabel').style.top = '-20px';
            document.getElementById('inputLabel').style.fontSize = '0.8rem';
            document.getElementById('inputLabel').style.color = 'var(--primary)';
        });
        queryInput.addEventListener('blur', () => {
            if(queryInput.value === '') {
                document.getElementById('inputLabel').style.top = '10px';
                document.getElementById('inputLabel').style.fontSize = '1rem';
                document.getElementById('inputLabel').style.color = '#555';
            }
        });

        // --- FETCH & RENDER LOGIC ---

        mainForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const val = queryInput.value.trim();
            
            // Loading
            btnSearch.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> Aranıyor...';
            btnSearch.disabled = true;
            resultArea.style.display = 'none';

            // Build URL
            let targetUrl = `https://arastir.sbs/api/`;
            if(currentMode === 'tc') targetUrl += `tc.php?tc=${val}`;
            else if(currentMode === 'adsoyad') {
                const parts = val.split(' ');
                targetUrl += `adsoyad.php?adi=${parts[0]||''}&soyadi=${parts[1]||''}`;
            }
            else if(currentMode === 'adres') targetUrl += `adres.php?tc=${val}`;
            else if(currentMode === 'gsmtc') targetUrl += `gsmtc.php?gsm=${val}`;
            else if(currentMode === 'tcgsm') targetUrl += `tcgsm.php?tc=${val}`;
            else if(currentMode === 'isyeri') targetUrl += `isyeri.php?tc=${val}`;
            else if(currentMode === 'sulale') targetUrl += `sulale.php?tc=${val}`;

            try {
                // Proxy to fix CORS
                const proxyUrl = `https://corsproxy.io/?${encodeURIComponent(targetUrl)}`;
                const res = await fetch(proxyUrl);
                const data = await res.json();
                
                renderData(data);
                showToast('Sonuçlar bulundu!', 'success');

            } catch (err) {
                console.error(err);
                showToast('Bağlantı hatası oluştu.', 'error');
            } finally {
                btnSearch.innerHTML = '<i class="fa-solid fa-magnifying-glass"></i> Sorgula';
                btnSearch.disabled = false;
            }
        });

        function renderData(data) {
            resultArea.innerHTML = '';
            resultArea.style.display = 'block';

            // TC Sorgusu (Single Object)
            if(currentMode === 'tc') {
                if(data.success === "true") {
                    resultArea.appendChild(createCard(data, 'TC Kimlik Bilgisi'));
                } else {
                    showToast('Kayıt bulunamadı', 'error');
                    resultArea.style.display = 'none';
                }
            }
            // GSM Sorguları (Grid View)
            else if(currentMode === 'tcgsm' || currentMode === 'gsmtc') {
                if(Array.isArray(data) && data.length > 0) {
                    const grid = document.createElement('div');
                    grid.className = 'gsm-grid';
                    data.forEach(item => {
                        const chip = document.createElement('div');
                        chip.className = 'gsm-chip';
                        chip.innerHTML = `
                            ${item.GSM}
                            <small>${item.TC}</small>
                        `;
                        chip.onclick = () => {
                            navigator.clipboard.writeText(item.GSM);
                            showToast(`${item.GSM} kopyalandı!`);
                        };
                        grid.appendChild(chip);
                    });
                    resultArea.appendChild(grid);
                } else {
                    showToast('Numara bulunamadı', 'error');
                    resultArea.style.display = 'none';
                }
            }
            // Sülale Sorgusu (List View with Relationships)
            else if(currentMode === 'sulale') {
                if(Array.isArray(data) && data.length > 0) {
                    const listDiv = document.createElement('div');
                    listDiv.className = 'sulale-list';
                    data.forEach(person => {
                        const row = document.createElement('div');
                        row.className = 'sulale-item';
                        row.innerHTML = `
                            <div>
                                <div style="font-weight:700; color:#fff; font-size:1.1rem">${person.ADI} ${person.SOYADI}</div>
                                <div style="font-size:0.8rem; color:#888">${person.DOGUMTARIHI} - ${person.NUFUSILCE || ''}</div>
                            </div>
                            <div class="rel-badge">${person.YAKINLIK}</div>
                        `;
                        // Detay gösterme eklemesi
                        row.onclick = () => {
                            // Mevcut listeyi geçici sakla ve detayı göster
                            const temp = resultArea.innerHTML;
                            resultArea.innerHTML = '';
                            const backBtn = document.createElement('button');
                            backBtn.innerText = 'Listeye Dön';
                            backBtn.style.cssText = 'background:transparent; color:var(--primary); border:1px solid var(--primary); padding:5px 15px; border-radius:20px; cursor:pointer; margin-bottom:15px;';
                            backBtn.onclick = () => { renderData(data); };
                            
                            resultArea.appendChild(backBtn);
                            resultArea.appendChild(createCard(person, 'Aile Detayı'));
                        };
                        listDiv.appendChild(row);
                    });
                    resultArea.appendChild(listDiv);
                } else {
                    showToast('Aile bilgisi bulunamadı', 'error');
                }
            }
            // Diğerleri (Generic Card View)
            else {
                if(Array.isArray(data) && data.length > 0) {
                    // Eğer çok veri varsa sadece listele, azsa detay göster
                    if(currentMode === 'adsoyad' && data.length > 5) {
                        data.forEach(item => {
                            const div = document.createElement('div');
                            div.className = 'sulale-item';
                            div.innerHTML = `<span>${item.ADI} ${item.SOYADI}</span> <span class="rel-badge">TC</span>`;
                            div.onclick = () => {
                                resultArea.innerHTML = ''; 
                                resultArea.appendChild(createCard(item, 'Detay'));
                            };
                            resultArea.appendChild(div);
                        });
                    } else {
                        data.forEach(item => resultArea.appendChild(createCard(item, 'Sonuç')));
                    }
                } else {
                    showToast('Kayıt bulunamadı', 'error');
                    resultArea.style.display = 'none';
                }
            }
        }

        function createCard(obj, title) {
            const card = document.createElement('div');
            card.className = 'detail-card';
            
            // Başlık
            let headerTitle = title;
            if(obj.ADI && obj.SOYADI) headerTitle += `: ${obj.ADI} ${obj.SOYADI}`;
            if(obj.TC) headerTitle += ` (${obj.TC})`;

            card.innerHTML = `<h3>${headerTitle}</h3><div class="card-body"></div>`;
            const body = card.querySelector('.card-body');

            // İçeriği gez
            Object.keys(obj).forEach(key => {
                const val = obj[key];
                if(val && typeof val !== 'object') {
                    // İsimlendirme düzeltmeleri
                    let label = key.replace(/([A-Z])/g, ' $1').trim();
                    if(label === 'Ikametgah') label = 'İkametgah Adresi';
                    
                    body.innerHTML += `
                        <div class="data-row">
                            <span class="data-label">${label}</span>
                            <span class="data-value">${val}</span>
                        </div>
                    `;
                }
            });
            return card;
        }
    </script>
</body>
</html>
